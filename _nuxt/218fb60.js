(window.webpackJsonp=window.webpackJsonp||[]).push([[29,21],{492:function(e,t,n){"use strict";n(5),n(9),n(13),n(17);var r=n(2),o=(n(34),n(7),n(30),n(65),n(296),n(18),n(32),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(33),n(41),n(8),n(67),n(310),n(0)),c=n(94),l=n(1);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var y=["sm","md","lg","xl"],h=y.reduce((function(e,t){return e[t]={type:[Boolean,String,Number],default:!1},e}),{}),v=y.reduce((function(e,t){return e["offset"+Object(l.E)(t)]={type:[String,Number],default:null},e}),{}),w=y.reduce((function(e,t){return e["order"+Object(l.E)(t)]={type:[String,Number],default:null},e}),{}),m={col:Object.keys(h),offset:Object.keys(v),order:Object.keys(w)};function O(e,t,n){var r=e;if(null!=n&&!1!==n){if(t){var o=t.replace(e,"");r+="-".concat(o)}return"col"!==e||""!==n&&!0!==n?(r+="-".concat(n)).toLowerCase():r.toLowerCase()}}var j=new Map;t.a=o.default.extend({name:"v-col",functional:!0,props:f(f(f(f({cols:{type:[Boolean,String,Number],default:!1}},h),{},{offset:{type:[String,Number],default:null}},v),{},{order:{type:[String,Number],default:null}},w),{},{alignSelf:{type:String,default:null,validator:function(e){return["auto","start","end","center","baseline","stretch"].includes(e)}},tag:{type:String,default:"div"}}),render:function(e,t){var n=t.props,data=t.data,o=t.children,l=(t.parent,"");for(var d in n)l+=String(n[d]);var f=j.get(l);return f||function(){var e,t;for(t in f=[],m)m[t].forEach((function(e){var r=n[e],o=O(t,e,r);o&&f.push(o)}));var o=f.some((function(e){return e.startsWith("col-")}));f.push((e={col:!o||!n.cols},Object(r.a)(e,"col-".concat(n.cols),n.cols),Object(r.a)(e,"offset-".concat(n.offset),n.offset),Object(r.a)(e,"order-".concat(n.order),n.order),Object(r.a)(e,"align-self-".concat(n.alignSelf),n.alignSelf),e)),j.set(l,f)}(),e(n.tag,Object(c.a)(data,{class:f}),o)}})},493:function(e,t,n){"use strict";n(5),n(9),n(13),n(17);var r=n(2),o=(n(41),n(51),n(27),n(7),n(30),n(65),n(296),n(18),n(32),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(33),n(8),n(310),n(0)),c=n(94),l=n(1);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var y=["sm","md","lg","xl"],h=["start","end","center"];function v(e,t){return y.reduce((function(n,r){return n[e+Object(l.E)(r)]=t(),n}),{})}var w=function(e){return[].concat(h,["baseline","stretch"]).includes(e)},m=v("align",(function(){return{type:String,default:null,validator:w}})),O=function(e){return[].concat(h,["space-between","space-around"]).includes(e)},j=v("justify",(function(){return{type:String,default:null,validator:O}})),x=function(e){return[].concat(h,["space-between","space-around","stretch"]).includes(e)},E=v("alignContent",(function(){return{type:String,default:null,validator:x}})),_={align:Object.keys(m),justify:Object.keys(j),alignContent:Object.keys(E)},k={align:"align",justify:"justify",alignContent:"align-content"};function C(e,t,n){var r=k[e];if(null!=n){if(t){var o=t.replace(e,"");r+="-".concat(o)}return(r+="-".concat(n)).toLowerCase()}}var S=new Map;t.a=o.default.extend({name:"v-row",functional:!0,props:f(f(f({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:w}},m),{},{justify:{type:String,default:null,validator:O}},j),{},{alignContent:{type:String,default:null,validator:x}},E),render:function(e,t){var n=t.props,data=t.data,o=t.children,l="";for(var d in n)l+=String(n[d]);var f=S.get(l);return f||function(){var e,t;for(t in f=[],_)_[t].forEach((function(e){var r=n[e],o=C(t,e,r);o&&f.push(o)}));f.push((e={"no-gutters":n.noGutters,"row--dense":n.dense},Object(r.a)(e,"align-".concat(n.align),n.align),Object(r.a)(e,"justify-".concat(n.justify),n.justify),Object(r.a)(e,"align-content-".concat(n.alignContent),n.alignContent),e)),S.set(l,f)}(),e(n.tag,Object(c.a)(data,{staticClass:"row",class:f}),o)}})},501:function(e,t,n){"use strict";n.r(t);n(27);var r={props:{markers:{type:Array,require:!1,default:function(){return[]}},center:{type:Array,require:!1,default:function(){return[51.505,-.159]}},geojson:{type:Object,require:!1,default:function(){return null}}},data:function(){return{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:5}},computed:{options:function(){return{onEachFeature:function(e,t){t.setStyle(e.properties.style),t.bindPopup("<div>".concat(e.properties.label,"</div>"))}}},onEachFeatureFunction:function(){return function(e,t){t.bindPopup('<div><a @click="search('.concat(e.properties.uri,')">').concat(e.properties.label,"</a></div>"))}}}},o=n(71),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("l-map",{staticStyle:{"z-index":"0",height:"600px",width:"100%"},attrs:{zoom:e.zoom,center:e.center}},[n("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),e._v(" "),e.geojson&&Object.keys(e.geojson).length>0?n("l-geo-json",{attrs:{geojson:e.geojson,options:e.options}}):e._e(),e._v(" "),e._l(e.markers,(function(marker,t){return n("l-marker",{key:t,attrs:{"lat-lng":marker.latLng,icon:marker.icon}},[n("l-popup",[n("a",[e._v(e._s(marker.label))])])],1)}))],2)],1)}),[],!1,null,null,null);t.default=component.exports},644:function(e,t,n){var content=n(661);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(23).default)("d699588e",content,!0,{sourceMap:!1})},660:function(e,t,n){"use strict";n(644)},661:function(e,t,n){var r=n(22)(!1);r.push([e.i,"#cy[data-v-553ee4d7]{width:100%;height:40%;position:absolute;top:50px;left:1px;text-align:left}body[data-v-553ee4d7]{font:14px helvetica neue,helvetica,arial,sans-serif}",""]),e.exports=r},725:function(e,t,n){"use strict";n.r(t);n(35),n(18),n(26),n(43),n(32),n(5),n(44),n(49),n(33);var r=n(19),o=(n(72),n(27),n(79),n(59),n(552)),c=n.n(o),l=n(501);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var y=n(553),h={components:{NewMap:l.default},data:function(){return{markers:[],center:[46.5,6.5],geojson:{},colors:[]}},mounted2:function(){this.view_init()},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o,data,l,f,h,v,w,m,O,j,x,E,_,k,C,S,F,P,R,I,N,U,D,T;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(new c.a).setColorGradient("#4CAF50","#F44336").setMidpoint(10).getColors(),console.log(n),e.colors=n,"\n    PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n    PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n    PREFIX ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n    SELECT * WHERE {\n      ?s a/rdfs:subClassOf*/rdfs:subClassOf ex:Factoid;\n        ex:description ?desc . \n      ?s ?p ?ref . \n      ?ref a/rdfs:subClassOf* ?er;\n        ex:referencesEntity ?referencesEntity;\n        ex:sourceDescription ?sourceDescription . \n      optional {\n        ?referencesEntity ex:name ?referencesEntityName;\n        a ?referencesEntityType .\n        filter (?referencesEntityType != skos:Concept)\n      }\n      optional { ?ref ex:referencesEntityInContext ?referencesEntityInContext } \n      optional { \n        {\n          ?s ?v ?o . ?o a ?typeOfO . ?o a/rdfs:subClassOf*/rdfs:subClassOf ex:Factoid .\n        }\n        UNION\n        {\n          ?o ?v ?s . ?o a ?typeOfS . ?o a/rdfs:subClassOf*/rdfs:subClassOf ex:Factoid .\n        }\n      }\n    }","https://ogawa.aws.ldas.jp/sparql",r="".concat("https://ogawa.aws.ldas.jp/sparql","?query=").concat(encodeURIComponent("\n    PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n    PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n    PREFIX ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n    SELECT * WHERE {\n      ?s a/rdfs:subClassOf*/rdfs:subClassOf ex:Factoid;\n        ex:description ?desc . \n      ?s ?p ?ref . \n      ?ref a/rdfs:subClassOf* ?er;\n        ex:referencesEntity ?referencesEntity;\n        ex:sourceDescription ?sourceDescription . \n      optional {\n        ?referencesEntity ex:name ?referencesEntityName;\n        a ?referencesEntityType .\n        filter (?referencesEntityType != skos:Concept)\n      }\n      optional { ?ref ex:referencesEntityInContext ?referencesEntityInContext } \n      optional { \n        {\n          ?s ?v ?o . ?o a ?typeOfO . ?o a/rdfs:subClassOf*/rdfs:subClassOf ex:Factoid .\n        }\n        UNION\n        {\n          ?o ?v ?s . ?o a ?typeOfS . ?o a/rdfs:subClassOf*/rdfs:subClassOf ex:Factoid .\n        }\n      }\n    }")),t.next=8,e.$axios.get(r);case 8:o=t.sent,data=o.data,data=e.$utils.convertVtoD(data),l={},f={},h=d(data),t.prev=14,h.s();case 16:if((v=h.n()).done){t.next=48;break}if("https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#EntityReference"!==(w=v.value).er){t.next=20;break}return t.abrupt("continue",46);case 20:if(m=w.s,l[m]||(l[m]={id:m,label:w.desc,shape:"dot",color:"orange",shadow:!0,original_color:"orange",type:"factoid"}),O=w.referencesEntity,l[O]){t.next=42;break}j=w.referencesEntityType,x="gray",t.t0=j,t.next="https://pleiades.stoa.org/places/vocab#Place"===t.t0?29:"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#Community"===t.t0?31:"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#ConceptualObject"===t.t0?33:"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#PhysicalObject"===t.t0?35:"https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Group"===t.t0?37:"https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Person"===t.t0?39:41;break;case 29:return x="#98fb98",t.abrupt("break",41);case 31:return x="red",t.abrupt("break",41);case 33:case 35:return x="yellow",t.abrupt("break",41);case 37:return x="orange",t.abrupt("break",41);case 39:return x="#03A9F4",t.abrupt("break",41);case 41:l[O]={id:O,label:w.referencesEntityName,shape:"dot",color:x,shadow:!0,original_color:x,type:j};case 42:E="".concat(m,"-").concat(O),f[E]={from:m,to:O,color:"gray",arrows:{to:{enabled:!0,type:"arrow"}}},_=m,w.o&&(k=w.o,C=null,S=null,w.typeOfO?(C=_,S=k):(C=k,S=_),F="".concat(C,"-").concat(S),f[F]={from:C,to:S,color:"gray",arrows:{to:{enabled:!0,type:"arrow"}},type:"factoidRelation"});case 46:t.next=16;break;case 48:t.next=53;break;case 50:t.prev=50,t.t1=t.catch(14),h.e(t.t1);case 53:return t.prev=53,h.f(),t.finish(53);case 56:for(R in console.log({nodesMap:l,edgesMap:f}),P=[],l)I=l[R],I.type,P.push({data:{id:R,background_color:I.color}});for(U in N=[],f)D=f[U],N.push({data:{source:D.from,target:D.to}});T=y({container:document.getElementById("cy"),boxSelectionEnabled:!1,autounselectify:!0,style:y.stylesheet().selector("node").css({height:80,width:80,"background-fit":"cover","border-color":"#000","border-width":3,"border-opacity":.5,content:"data(name)","text-valign":"center"}).selector("edge").css({width:6,"target-arrow-shape":"triangle","line-color":"#ffaaaa","target-arrow-color":"#ffaaaa","curve-style":"bezier"}).selector("node[background_color]").css({"background-color":"data(background_color)","text-outline-color":"data(background_color)"}),elements:{nodes:P,edges:N},layout:{name:"breadthfirst",directed:!0,padding:10}}),e.cy=T,e.getPlaces(l);case 64:case"end":return t.stop()}}),t,null,[[14,50,53,56]])})))()},methods:{add_node:function(){this.cy.add([{group:"nodes",data:{id:"node"+this.count},position:{x:300,y:200}},{group:"edges",data:{id:"edge"+this.count,source:"node"+this.count,target:"cat"}}])},getPlaces:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,c,l,f,data,y,h,v,w,m,O;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(o in r=[],e)"https://pleiades.stoa.org/places/vocab#Place"===e[o].type&&r.push(o);return c="PREFIX geo: <http://www.opengis.net/ont/geosparql#>\n      PREFIX dct: <http://purl.org/dc/terms/>\n      PREFIX wgs84: <http://www.w3.org/2003/01/geo/wgs84_pos#>\n      prefix ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n      PREFIX pleiades: <https://pleiades.stoa.org/places/vocab#>\n      PREFIX osspatial: <http://data.ordnancesurvey.co.uk/ontology/spatialrelations/>\n      PREFIX osgeo: <http://data.ordnancesurvey.co.uk/ontology/geometry/>\n\n      SELECT distinct * WHERE {\n        ?placeUri ex:name ?title; a pleiades:Place . \n        filter (?placeUri in (".concat(r.map((function(e){return"<".concat(e,">")})).join(", "),"))\n        {\n          { ?placeUri wgs84:lat ?lat; wgs84:long ?long . } \n          UNION \n          # { ?placeUri pleiades:hasLocation/osspatial:partiallyOverlaps/geo:hasGeometry/osgeo:asGeoJSON ?geo }\n          { ?placeUri pleiades:hasLocation/osgeo:asGeoJSON ?geo }\n          UNION\n          { ?placeUri osspatial:within/osgeo:extent/osgeo:asGeoJSON ?geo }\n           UNION\n          { ?placeUri osspatial:partiallyOverlaps/osgeo:extent/osgeo:asGeoJSON ?geo }\n        \n        }\n      }"),"https://ogawa.aws.ldas.jp/sparql",l="".concat("https://ogawa.aws.ldas.jp/sparql","?query=").concat(encodeURIComponent(c)),n.next=7,t.$axios.get(l);case 7:f=n.sent,data=f.data,data=t.$utils.convertVtoD(data),console.log({data:data}),y=[],h=[],v=d(data),n.prev=14,v.s();case 16:if((w=v.n()).done){n.next=26;break}if(!(m=w.value).geo){n.next=23;break}return h.push({type:"Feature",geometry:JSON.parse(m.geo),properties:{label:m.title,uri:m.placeUri,style:{color:"red"}}}),n.abrupt("continue",24);case 23:m.lat&&y.push({uri:m.placeUri,label:m.title,latLng:[m.lat,m.long]});case 24:n.next=16;break;case 26:n.next=31;break;case 28:n.prev=28,n.t0=n.catch(14),v.e(n.t0);case 31:return n.prev=31,v.f(),n.finish(31);case 34:O={type:"FeatureCollection",features:h},t.geojson=O,t.markers=y;case 37:case"end":return n.stop()}}),n,null,[[14,28,31,34]])})))()},view_init:function(){var e=y({container:document.getElementById("cy"),boxSelectionEnabled:!1,autounselectify:!0,style:y.stylesheet().selector("node").css({height:80,width:80,"background-fit":"cover","border-color":"#000","border-width":3,"border-opacity":.5,content:"data(name)","text-valign":"center"}).selector("edge").css({width:6,"target-arrow-shape":"triangle","line-color":"#ffaaaa","target-arrow-color":"#ffaaaa","curve-style":"bezier"}),elements:{nodes:[{data:{id:"cat"}},{data:{id:"bird"}},{data:{id:"ladybug"}},{data:{id:"aphid"}},{data:{id:"rose"}},{data:{id:"grasshopper"}},{data:{id:"plant"}},{data:{id:"wheat"}}],edges:[{data:{source:"cat",target:"bird"}},{data:{source:"bird",target:"ladybug"}},{data:{source:"bird",target:"grasshopper"}},{data:{source:"grasshopper",target:"plant"}},{data:{source:"grasshopper",target:"wheat"}},{data:{source:"ladybug",target:"aphid"}},{data:{source:"aphid",target:"rose"}}]},layout:{name:"breadthfirst",directed:!0,padding:10}});this.cy=e,this.calc_test()},test:function(){var e,t=d(this.geojson.features);try{for(t.s();!(e=t.n()).done;){e.value.properties.style={color:"green"}}}catch(e){t.e(e)}finally{t.f()}},calc_test:function(){var e,t=this.cy,n=t.elements().dijkstra("#".concat("cat")),r=d(t.elements());try{for(r.s();!(e=r.n()).done;){var o=e.value[0]._private.data.id;if("cat"!==o){var c=n.pathTo(t.$("#".concat(o))),l=n.distanceTo(t.$("#".concat(o)));console.log(o,{pathToJ:c,distToJ:l})}}}catch(e){r.e(e)}finally{r.f()}}}},v=(n(660),n(71)),w=n(73),m=n.n(w),O=n(223),j=n(492),x=n(493),component=Object(v.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("button",{on:{click:e.test}},[e._v("change color")]),e._v(" "),e._l(e.colors,(function(t,r){return n("v-btn",{key:r,attrs:{color:t}},[e._v(" a ")])})),e._v(" "),n("v-row",[n("v-col",[n("div",{attrs:{id:"view"}},[n("button",{on:{click:e.add_node}},[e._v("push")]),e._v(" "),n("v-btn",{on:{click:e.calc_test}},[e._v("test")]),e._v(" "),n("div",{attrs:{id:"cy"}})],1)]),e._v(" "),n("v-col",[n("NewMap",{attrs:{geojson:e.geojson,center:e.center,markers:e.markers}})],1)],1)],2)}),[],!1,null,"553ee4d7",null);t.default=component.exports;m()(component,{NewMap:n(501).default}),m()(component,{VBtn:O.a,VCol:j.a,VRow:x.a})}}]);