(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{508:function(e,n,t){"use strict";t.r(n);t(35),t(18),t(26),t(43),t(32),t(5),t(44),t(49),t(33);var o=t(19),r=(t(73),t(27),t(79),t(210),t(41),t(51),t(472));function c(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return d(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){l=!0,r=e},f:function(){try{c||null==t.return||t.return()}finally{if(l)throw r}}}}function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var i=0,t=new Array(n);i<n;i++)t[i]=e[i];return t}var l=!1,f={components:{network:r.a},props:{id:{type:String,require:!0,default:""}},data:function(){return{isLemma:!1,nodes:[],edges:[],nodesMap:{},edgesMap:{},options:{},orgNodes:[],orgEdges:[]}},computed:{selectedFactoidIdOnText:{get:function(){return this.$store.getters.getSelectedFactoidIdOnText},set:function(e){this.$store.commit("setSelectedFactoidIdOnText",e)}}},watch:{isLemma:function(){this.drawNetwork()},id:function(){var e=this.id,n=this.$refs.network;n&&(n.selectNodes([e]),this.neighbourhoodHighlight([e]))}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var t,o,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return"\n    PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n    PREFIX ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n    SELECT * WHERE {\n      ?s a/rdfs:subClassOf* ex:Factoid;\n        ex:description ?desc . \n      ?s ?p ?ref . \n      ?ref a/rdfs:subClassOf* ex:EntityReference;\n        ex:referencesEntity ?ref_referencesEntity;\n        ex:sourceDescription ?ref_sourceDescription . \n      optional { ?ref ex:referencesEntityInContext ?ref_referencesEntityInContext } \n      optional { \n        {\n          ?s ?v ?o . \n        }\n        UNION\n        {\n          ?o ?v ?s . \n        }\n        ?o a/rdfs:subClassOf* ex:Factoid .\n      }\n    }","https://dydra.com/junogawa/romanfactoid/sparql",t="".concat("https://dydra.com/junogawa/romanfactoid/sparql","?query=").concat(encodeURIComponent("\n    PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n    PREFIX ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n    SELECT * WHERE {\n      ?s a/rdfs:subClassOf* ex:Factoid;\n        ex:description ?desc . \n      ?s ?p ?ref . \n      ?ref a/rdfs:subClassOf* ex:EntityReference;\n        ex:referencesEntity ?ref_referencesEntity;\n        ex:sourceDescription ?ref_sourceDescription . \n      optional { ?ref ex:referencesEntityInContext ?ref_referencesEntityInContext } \n      optional { \n        {\n          ?s ?v ?o . \n        }\n        UNION\n        {\n          ?o ?v ?s . \n        }\n        ?o a/rdfs:subClassOf* ex:Factoid .\n      }\n    }")),n.next=5,e.$axios.get(t);case 5:o=n.sent,data=o.data,console.log({data:data});case 8:case"end":return n.stop()}}),n)})))()},mounted2:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var t,o,data,r,d,l,f,h,m,y,v,x,_,E,w,C,L,R,I,j,O,F,N,k;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return"PREFIX ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n        SELECT * WHERE {\n          ?s ?v ?o; ex:description ?desc_s . \n          OPTIONAL {\n            ?s ?related_so ?s_o .\n            {\n              ?s_o ex:referencesEntityInContext ?entityInContext_s; \n              ex:referencesEntity ?referencesEntity_s .\n            }\n            UNION\n            {\n              ?s_o ex:referencesEntity ?referencesEntity_s .\n            }\n            ?referencesEntity_s ex:name ?referencesEntityName_s; rdf:type ?referencesEntityType_s\n          }\n          ?o ex:description ?desc_o .\n          filter (?v = ex:mentionedAsPrecedent || ?v = ex:mentionedAsParallel || ?v = ex:hasContent)\n\n          OPTIONAL {\n            ?o ?related_oo ?o_o .\n            {\n              ?o_o ex:referencesEntityInContext ?entityInContext_o; ex:referencesEntity ?referencesEntity_o .\n            }\n            UNION\n            {\n              ?o_o ex:referencesEntity ?referencesEntity_o .\n            }\n            ?referencesEntity_o ex:name ?referencesEntityName_o; rdf:type ?referencesEntityType_o . \n          }\n        }","https://dydra.com/junogawa/romanfactoid/sparql",t="".concat("https://dydra.com/junogawa/romanfactoid/sparql","?query=").concat(encodeURIComponent("PREFIX ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n        SELECT * WHERE {\n          ?s ?v ?o; ex:description ?desc_s . \n          OPTIONAL {\n            ?s ?related_so ?s_o .\n            {\n              ?s_o ex:referencesEntityInContext ?entityInContext_s; \n              ex:referencesEntity ?referencesEntity_s .\n            }\n            UNION\n            {\n              ?s_o ex:referencesEntity ?referencesEntity_s .\n            }\n            ?referencesEntity_s ex:name ?referencesEntityName_s; rdf:type ?referencesEntityType_s\n          }\n          ?o ex:description ?desc_o .\n          filter (?v = ex:mentionedAsPrecedent || ?v = ex:mentionedAsParallel || ?v = ex:hasContent)\n\n          OPTIONAL {\n            ?o ?related_oo ?o_o .\n            {\n              ?o_o ex:referencesEntityInContext ?entityInContext_o; ex:referencesEntity ?referencesEntity_o .\n            }\n            UNION\n            {\n              ?o_o ex:referencesEntity ?referencesEntity_o .\n            }\n            ?referencesEntity_o ex:name ?referencesEntityName_o; rdf:type ?referencesEntityType_o . \n          }\n        }")),n.next=5,e.$axios.get(t);case 5:o=n.sent,data=o.data,r={},d={},l=c(data),n.prev=10,l.s();case 12:if((f=l.n()).done){n.next=49;break}h=f.value,m=0,y=["s","o"];case 16:if(!(m<y.length)){n.next=43;break}if(v=y[m],x=h[v],r[x]||(r[x]={id:x,label:h["desc_".concat(v)],shape:"dot",color:"orange",shadow:!0,original_color:"orange",type:"factoid"}),_=h["referencesEntity_".concat(v)],r[_]){n.next=38;break}E=h["referencesEntityType_".concat(v)],w="#03A9F4",n.t0=E,n.next="https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Location"===n.t0?27:"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#Community"===n.t0?29:"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#ConceptualObject"===n.t0?31:"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#PhysicalObject"===n.t0?33:"https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Group"===n.t0?35:37;break;case 27:return w="#98fb98",n.abrupt("break",37);case 29:return w="red",n.abrupt("break",37);case 31:case 33:return w="yellow",n.abrupt("break",37);case 35:return w="orange",n.abrupt("break",37);case 37:r[_]={id:_,label:h["referencesEntityName_".concat(v)],shape:"dot",color:w,shadow:!0,original_color:w};case 38:C="".concat(x,"-").concat(_),d[C]={from:x,to:_,color:"gray",arrows:{to:{enabled:!0,type:"arrow"}}};case 40:m++,n.next=16;break;case 43:L=h.s,R=h.o,I="".concat(L,"-").concat(R),d[I]={from:L,to:R,color:"gray",arrows:{to:{enabled:!0,type:"arrow"}}};case 47:n.next=12;break;case 49:n.next=54;break;case 51:n.prev=51,n.t1=n.catch(10),l.e(n.t1);case 54:return n.prev=54,l.f(),n.finish(54);case 57:return n.next=59,e.getAssociatedObjects(r,d);case 59:for(N in j=n.sent,r=j.nodesMap,d=j.edgesMap,e.nodesMap=r,e.edgesMap=d,O=[],F=[],r)O.push(r[N]);for(k in d)F.push(d[k]);e.orgEdges=F,e.orgNodes=O,e.drawNetwork();case 71:case"end":return n.stop()}}),n,null,[[10,51,54,57]])})))()},methods:{getAssociatedObjects:function(e,n){var t=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,d,filter,l,f,h,data,m,y,v,x,_,E,w,C,L,R,I,j,O,F,label,N;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(d in r=[],e)"factoid"===e[d].type&&r.push("?s = <".concat(d,">"));if(0!==r.length){o.next=4;break}return o.abrupt("return",{nodesMap:e,edgesMap:n});case 4:return filter=r.join(" || "),"https://dydra.com/junogawa/romanfactoid/sparql",l="PREFIX ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n      SELECT * WHERE {\n        ?s ?v ?ao . ?ao ex:hasLemma ?lemma; a ?type .\n        FILTER (".concat(filter,")\n        SERVICE <https://dydra.com/i2k/lemmabank/sparql> {\n          ?lemma rdfs:label ?label .\n        }\n      }"),f="".concat("https://dydra.com/junogawa/romanfactoid/sparql","?query=").concat(encodeURIComponent(l)),o.next=10,t.$axios.get(f);case 10:h=o.sent,data=h.data,m={},y=c(data);try{for(y.s();!(v=y.n()).done;)x=v.value,_=x.label,E=x.ao,w=x.s,m[w]||(m[w]={}),m[w][E]||(m[w][E]={type:x.type,labels:[]}),(C=m[w][E].labels).includes(_)||C.push(_)}catch(e){y.e(e)}finally{y.f()}for(R in L={"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#ConceptualObjectReference":{color:"pink"},"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#PhysicalObjectReference":{color:"gray"}},m)for(I in m[R])j=m[R][I],O=j.type,(F=j.labels).sort(),label=F.join(" / "),e[label]||(N=L[O].color,e[label]={id:label,label:label,color:N,shape:"dot",type:"lemma",shadow:!0,size:10,original_color:N}),n["".concat(R,"-").concat(label)]={from:R,to:label,arrows:"to",color:"gray"};return o.abrupt("return",{nodesMap:e,edgesMap:n});case 18:case"end":return o.stop()}}),o)})))()},drawNetwork:function(){var e,n=this.orgEdges,t=this.orgNodes,o=[],r=[],d=[],l=this.isLemma,f=c(t);try{for(f.s();!(e=f.n()).done;){var h=e.value;(l||"lemma"!==h.type)&&(o.push(h),d.push(h.id))}}catch(e){f.e(e)}finally{f.f()}var m,y=c(n);try{for(y.s();!(m=y.n()).done;){var v=m.value,x=v.from,_=v.to;d.includes(x)&&d.includes(_)&&r.push(v)}}catch(e){y.e(e)}finally{y.f()}this.nodes=o,this.edges=r},neighbourhoodHighlightByHand:function(e){this.neighbourhoodHighlight(e.nodes),this.onNodeSelected(e)},neighbourhoodHighlight:function(e){var n=JSON.parse(JSON.stringify(this.nodesMap)),t=this.$refs.network;if(e.length>0){var i,o;l=!0;var r=e[0];for(var c in n)n[c].color="rgba(200,200,200,0.5)",void 0===n[c].hiddenLabel&&(n[c].hiddenLabel=n[c].label,n[c].label=void 0);var d=t.getConnectedNodes(r),f=[];for(i=1;i<2;i++)for(o=0;o<d.length;o++)f=f.concat(t.getConnectedNodes(d[o]));for(i=0;i<f.length;i++)n[f[i]].color="rgba(150,150,150,0.75)",void 0!==n[f[i]].hiddenLabel&&(n[f[i]].label=n[f[i]].hiddenLabel,n[f[i]].hiddenLabel=void 0);for(i=0;i<d.length;i++)n[d[i]].color=n[d[i]].original_color,void 0!==n[d[i]].hiddenLabel&&(n[d[i]].label=n[d[i]].hiddenLabel,n[d[i]].hiddenLabel=void 0);n[r].color={border:"black",background:n[r].original_color,highlight:{background:n[r].original_color,border:"black"}},void 0!==n[r].hiddenLabel&&(n[r].label=n[r].hiddenLabel,n[r].hiddenLabel=void 0)}else if(!0===l){for(var h in n)n[h].color=n[h].original_color,void 0!==n[h].hiddenLabel&&(n[h].label=n[h].hiddenLabel,n[h].hiddenLabel=void 0);l=!1}var m=[],y=this.isLemma;for(var v in n)if(n[v]){var x=n[v];if(!y&&"lemma"===x.type)continue;m.push(x)}this.nodes=m},neighbourhoodHighlight2:function(e){console.log({params:e});var n=JSON.parse(JSON.stringify(this.nodesMap)),t=this.$refs.network;if(e.nodes.length>0){var i,o;l=!0;var r=e.nodes[0];for(var c in n)n[c].color="rgba(200,200,200,0.5)",void 0===n[c].hiddenLabel&&(n[c].hiddenLabel=n[c].label,n[c].label=void 0);var d=t.getConnectedNodes(r),f=[];for(i=1;i<2;i++)for(o=0;o<d.length;o++)f=f.concat(t.getConnectedNodes(d[o]));for(i=0;i<f.length;i++)n[f[i]].color="rgba(150,150,150,0.75)",void 0!==n[f[i]].hiddenLabel&&(n[f[i]].label=n[f[i]].hiddenLabel,n[f[i]].hiddenLabel=void 0);for(i=0;i<d.length;i++)n[d[i]].color=n[d[i]].original_color,void 0!==n[d[i]].hiddenLabel&&(n[d[i]].label=n[d[i]].hiddenLabel,n[d[i]].hiddenLabel=void 0);n[r].color=n[r].original_color,void 0!==n[r].hiddenLabel&&(n[r].label=n[r].hiddenLabel,n[r].hiddenLabel=void 0)}else if(!0===l){for(var h in n)n[h].color=n[h].original_color,void 0!==n[h].hiddenLabel&&(n[h].label=n[h].hiddenLabel,n[h].hiddenLabel=void 0);l=!1}var m=[];for(var y in n)n[y]&&m.push(n[y]);this.nodes=m},onNodeSelected:function(e){var n=e.nodes;if(n.length>0){var t=n[0],o=this.nodesMap[t];if("factoid"===o.type)this.selectedFactoidIdOnText=this.$utils.getIdFromUri(o.id);else{if(!o.context)return;this.selectedEntityIdOnText=this.$utils.getIdFromUri(o.context)}}}}},h=t(71),m=t(72),y=t.n(m),v=t(650),component=Object(h.a)(f,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return e.nodes.length>0?t("div",{staticClass:"mb-5"},[t("network",{ref:"network",staticClass:"mt-5",staticStyle:{width:"100%",height:"500px",border:"1px solid lightgray"},attrs:{nodes:e.nodes,edges:e.edges,options:e.options},on:{click:e.neighbourhoodHighlightByHand}}),e._v(" "),t("div",{staticClass:"mt-4"},[t("v-switch",{attrs:{label:"Lemma"},model:{value:e.isLemma,callback:function(n){e.isLemma=n},expression:"isLemma"}})],1)],1):e._e()}),[],!1,null,null,null);n.default=component.exports;y()(component,{VSwitch:v.a})}}]);